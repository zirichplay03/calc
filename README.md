# Server-Calculator

## Описание проекта
Этот проект представляет собой сервер-калькулятор, реализованный на C++ с использованием сокетов TCP. Сервер позволяет пользователям аутентифицироваться, проверять баланс и выполнять арифметические операции.

## Основные компоненты

### 2. База данных

### Используемая система
Проект использует **SQLite3** для хранения информации о пользователях и их балансе.

### Таблицы базы данных
- **users** – хранит данные пользователей (имя, пароль, баланс).
- **logs** – ведет журнал действий пользователей.

### Расположение базы данных
База данных создается автоматически в директории **build/** при первой сборке проекта и называется **calculator.db**.

### Работа с базой данных

### Открытие базы данных
Для работы с базой данных используйте команду:
```bash
sqlite3 build/calculator.db
```
После выполнения команды откроется интерактивный интерфейс SQLite.

### Просмотр таблиц
Внутри SQLite выполните команду:
```sql
.tables
```
Вывод покажет все доступные таблицы, например:
```bash
logs   users
```

### Просмотр содержимого таблицы users
```sql
SELECT * FROM users;
```
Выведет список всех пользователей с их балансами.

### Просмотр журнала логирования
```sql
SELECT * FROM logs;
```
Выведет все записанные действия пользователей.

### 2. Сервер
- Реализован в `server.h` и `server.cpp`.
- Обрабатывает подключение клиентов через TCP.
- Поддерживает аутентификацию пользователей.
- Позволяет проверять баланс и выполнять расчеты.

### 3. Клиент
- Реализован в `client.h` и `client.cpp`.
- Подключается к серверу и взаимодействует с ним через текстовые команды.
- Позволяет вводить арифметические выражения для вычислений.

### 4. Аутентификация
- Реализована в `auth.h` и `auth.cpp`.
- Проверяет логин и пароль пользователей, записанные в базе данных.
- Логирует действия пользователей.
- Управляет балансом пользователей.

### 5. Калькулятор
- Реализован в `calculator.h` и `calculator.cpp`.
- Поддерживает основные арифметические операции: сложение, вычитание, умножение и деление.

## Установка и запуск

### 1. Установка зависимостей
Перед сборкой необходимо установить SQLite3:
```bash
sudo dnf install -y sqlite sqlite-devel
```

### 2. Сборка проекта
Для сборки проекта выполните команду:
```bash
./build.sh
```

### 3. Запуск сервера
После успешной сборки перейдите в папку `build/src/server` и запустите сервер:
```bash
cd build/src/server
./calc_server
```

### 4. Запуск клиента
Для подключения к серверу перейдите в папку `build/src/client` и запустите клиент:
```bash
cd build/src/client
./calc_client
```

## Использование

### Подключение клиента
После запуска клиенту будет предложено ввести логин и пароль. Если учетные данные верны, пользователь сможет выполнять команды.

### Доступные команды
1. `calc` - Запускает калькулятор.
2. `balance` - Отображает текущий баланс пользователя.
3. `exit` - Отключает клиента от сервера.

### Пример работы калькулятора
После ввода команды `calc`, сервер запросит выражение в формате:
```
число оператор число
```
Пример ввода:
```
5 + 3
```
Ответ сервера:
```
Addition result: 8
```

## Журналирование
Все действия пользователей записываются в таблицу `logs`, что позволяет отслеживать активность.

## Заключение
Этот проект демонстрирует работу TCP-сервера с аутентификацией, балансом и калькулятором. Использование SQLite3 позволяет сохранять данные пользователей, а система логирования помогает отслеживать их действия.

